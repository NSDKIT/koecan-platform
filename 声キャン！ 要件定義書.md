# 声キャン！ 要件定義書 v2.0

## 改訂履歴
| バージョン | 日付 | 変更内容 | 作成者 |
|-----------|------|----------|--------|
| 1.0 | 2025-11-22 | 初版作成 | Claude |
| 2.0 | 2025-11-22 | 実装状況を反映、未実装機能を追加 | Claude |

## v2.0での主な変更点
- ✅ ターゲットユーザーをモニター全般に拡大（大学生に限定しない）
- ✅ AIマッチング機能を追加
- ✅ キャリア相談機能を追加
- ✅ サポートチャット機能を追加
- ✅ LINE連携機能を追加
- ✅ PWA対応を追加
- ✅ Markdown/CSV一括インポート機能を追加
- ✅ 技術スタックをSupabaseに変更
- ✅ マスターデータを自由入力方式に変更
- 🆕 友達紹介機能の詳細化
- 🆕 FAQ機能の追加
- 🆕 お知らせ機能の追加
- 🆕 利用規約・プライバシーポリシー機能の追加
- 🆕 ブラウザプッシュ通知の追加

---

## 目次
1. [プロジェクト概要](#1-プロジェクト概要)
2. [システム概要](#2-システム概要)
3. [機能要件](#3-機能要件)
4. [非機能要件](#4-非機能要件)
5. [データ要件](#5-データ要件)
6. [画面構成](#6-画面構成)
7. [外部連携](#7-外部連携)
8. [開発スケジュール](#8-開発スケジュール)
9. [リスク管理](#9-リスク管理)
10. [今後の拡張可能性](#10-今後の拡張可能性)
11. [成功指標（KPI）](#11-成功指標kpi)

---

## 1. プロジェクト概要

### 1.1 プロジェクト名
**声キャン！（こえきゃん）**

### 1.2 プロジェクト概要
モニター（主に大学生・大学院生）をターゲットとした、アンケート回答型ポイント獲得Webアプリケーション。企業からのアンケートに回答することでポイントを獲得し、獲得したポイントを交換できるプラットフォーム。

**v2.0での拡張**:
- AIによる企業マッチング機能
- キャリア相談サービス
- リアルタイムサポートチャット
- LINE連携による即時通知

### 1.3 ターゲットユーザー
**主要ターゲット**: 大学生・大学院生  
**副次ターゲット**: 社会人モニター（柔軟に対応）

### 1.4 ビジネスモデル
**収益源**:
1. 企業からのアンケート掲載料（主要）
2. キャリア相談サービス（将来的な有料化）
3. 企業マッチング成功報酬（将来的）

### 1.5 目標数値
- **初年度目標ユーザー数**: 500人
- **想定同時接続数**: 150人
- **月間アンケート回答数**: 5,000回以上
- **ポイント交換率**: 60%以上

---

## 2. システム概要

### 2.1 システム構成
- **プラットフォーム**: Webアプリケーション（PWA対応）
- **対応デバイス**: PC、タブレット、スマートフォン（レスポンシブデザイン）
- **技術スタック**: React + TypeScript, Supabase (PostgreSQL), Next.js

### 2.2 主要機能

#### 2.2.1 コア機能（実装済み）
1. ユーザー管理機能
2. アンケート管理機能
3. ポイント管理機能
4. ポイント交換機能
5. 役割管理機能（Monitor/Client/Admin/Support）

#### 2.2.2 付加価値機能（実装済み）
6. AIマッチング機能
7. キャリア相談機能
8. サポートチャット機能
9. LINE連携機能
10. PWAインストール機能
11. Markdown/CSV一括インポート機能

#### 2.2.3 追加機能（v2.0で実装）
12. **友達紹介機能** 🆕
13. **FAQ機能** 🆕
14. **お知らせ機能** 🆕
15. **利用規約・プライバシーポリシー機能** 🆕
16. **ブラウザプッシュ通知** 🆕
17. **外部API自動連携（ポイント交換）** 🆕

---

## 3. 機能要件

### 3.1 ユーザー管理機能

#### 3.1.1 会員登録
**登録方法**
- メールアドレス＋パスワード方式
- メール認証による本人確認

**必須登録情報**
- メールアドレス
- パスワード（8文字以上、英数字混在推奨）
- 氏名（姓・名）
- 年齢
- 性別
- 職業（学生/社会人を選択、学生の場合は大学名を自由入力）
- 居住地（都道府県）

**任意登録情報**
- 詳細プロフィール（プロフィールアンケート経由で収集）
  - 就活状況
  - 価値観
  - 希望業界・職種
  - 働き方の重視点
  - その他50問以上の詳細項目

#### 3.1.2 ログイン・ログアウト
- メールアドレス＋パスワードでのログイン
- パスワード表示切替機能（UX向上）
- パスワードリセット機能
- ログイン状態の保持（セッション管理）

#### 3.1.3 プロフィール管理
- プロフィール情報の閲覧
- プロフィール情報の編集（ProfileModal.tsx）
- メールアドレス変更（再認証必要）
- パスワード変更
- プロフィールアンケートの回答・更新（MonitorProfileSurveyModal.tsx）

#### 3.1.4 退会機能
- アカウント削除
- データの論理削除（一定期間保持）
- 個人情報の匿名化

---

### 3.2 アンケート機能

#### 3.2.1 アンケートの種類
1. **デイリーアンケート**
   - 毎日回答可能なアンケート
   - 簡易的な内容（5問程度）

2. **通常アンケート**
   - 1回限りの回答
   - 標準的な内容（10-20問）

3. **期間限定キャンペーンアンケート**
   - 特定期間のみ表示
   - 高ポイント報酬

4. **プロフィールアンケート**（特殊）
   - 初回登録時または定期的に回答
   - AIマッチングの基礎データ
   - 50問以上の詳細項目

#### 3.2.2 アンケート形式
以下の形式を組み合わせて構成：
- 単一選択（ラジオボタン）
- 複数選択（チェックボックス）
- 自由記述（テキストエリア）
- 評価スケール（1-5段階、1-10段階など）
- ランキング形式（最大選択数指定可能）

#### 3.2.3 アンケート情報
- タイトル
- 説明文
- 所要時間（目安）
- 獲得ポイント数（基本30ポイント、カスタマイズ可能）
- 回答期限
- 対象者条件（全員 or 属性絞り込み）

#### 3.2.4 アンケート配信ロジック
**全体配信**
- すべてのモニターに表示

**ターゲット配信**
- プロフィールアンケートの回答に基づく絞り込み
  - 年齢層
  - 性別
  - 職業（学生/社会人）
  - 居住地
  - 就活状況
  - 興味・関心分野

#### 3.2.5 アンケート回答（MonitorDashboard.tsx）
- アンケート一覧表示
  - 未回答アンケート
  - 回答済みアンケート
  - 対象外アンケート
- アンケート詳細表示
- 回答入力（質問タイプに応じたUI）
- 回答確認
- 回答送信
- 回答完了通知（ポイント付与）

#### 3.2.6 アンケート作成（ClientDashboard.tsx / AdminDashboard.tsx）
**手動作成**
- 質問を1つずつ追加
- 質問タイプの選択
- 選択肢の設定
- 必須/任意の設定

**一括作成**
- **Markdownインポート**（ImportSurveyModal.tsx）
  - 複数アンケートの同時作成
  - プレビュー機能
  - エラーチェック
- **CSVインポート**（ImportCsvModal.tsx）
  - 質問リストの一括登録
  - テンプレートダウンロード

#### 3.2.7 回答データ管理
- 回答データの閲覧（Client/Admin）
- 集計データの表示
  - 回答数
  - 回答率
  - 選択肢別集計
  - グラフ表示
- CSV/Excelエクスポート
- 個人情報の匿名化

---

### 3.3 ポイント管理機能

#### 3.3.1 ポイント基本仕様
- **ポイント種類**: 1種類（声キャンポイント）
- **ポイント単位**: 1ポイント = 1円相当
- **有効期限**: なし
- **獲得上限**: なし（1日あたりの制限なし）

#### 3.3.2 ポイント獲得方法
1. **アンケート回答**
   - 基本：30ポイント/1アンケート
   - カスタマイズ可能（アンケートごと）

2. **友達紹介** 🆕
   - 紹介成功：200ポイント/1人
   - 条件：被紹介者が会員登録＋メール認証完了

3. **キャンペーン**
   - 期間限定ボーナスポイント
   - 初回登録ボーナス（検討中）

#### 3.3.3 ポイント履歴（ProfileModal経由）
- ポイント獲得履歴の表示
  - 獲得日時
  - 獲得理由（アンケート名、紹介など）
  - 獲得ポイント数
- ポイント使用履歴の表示
  - 交換日時
  - 交換先
  - 使用ポイント数
- 現在の保有ポイント数表示

#### 3.3.4 ポイント交換（PointExchangeModal.tsx / PointExchangeManager.tsx）

**v1.0の仕様（実装済み）**:
1. ユーザーが交換申請（500pt以上）
2. 管理者が手動で承認
3. ギフト券URL/コードを手動入力
4. 承認と同時に通知送信（LINE/メール）

**v2.0での改善** 🆕:
1. ユーザーが交換申請（500pt以上）
2. **外部ポイント交換APIに自動連携**
3. 交換URLを自動生成
4. メール/LINEで自動送信
5. （管理者承認はオプション）

**交換条件**
- 最低交換ポイント数：500ポイント
- 交換手数料：なし

**交換先**
- 外部ポイント交換サービス経由（PeX、ドットマネー等）
  - 現金（銀行振込）
  - 電子マネー（PayPay、楽天ポイントなど）
  - ギフトカード（Amazonギフト券など）

**通知方法**
- LINE連携済みユーザー：LINEプッシュ通知
- 未連携ユーザー：メール通知
- 管理画面での確認も可能

---

### 3.4 友達紹介機能 🆕

#### 3.4.1 紹介コード発行
- マイページに「友達を招待」ボタンを設置
- ボタン押下でユニークな紹介コード生成
  - フォーマット: `KOECAN-XXXXXXXX`（英数字8桁）
  - 重複チェック
- 紹介コードの表示・コピー機能
- SNSシェア機能
  - LINE
  - Twitter
  - Facebook
  - クリップボードコピー

#### 3.4.2 紹介コード入力
- 新規登録時に紹介コード入力欄を表示
- 任意入力（必須ではない）
- 紹介コードの検証
  - 存在チェック
  - 自己紹介の防止
- 無効なコードの場合はエラー表示

#### 3.4.3 紹介特典
**紹介者（招待した側）**
- 被紹介者が会員登録＋メール認証完了：200ポイント付与
- ポイント付与タイミング：メール認証完了後、即時
- 通知：LINE/メールで「紹介が成功しました」

**被紹介者（招待された側）**
- 特典なし（シンプルに保つ）
- 将来的に初回登録ボーナスを検討

#### 3.4.4 紹介実績
- マイページに紹介専用セクション
  - 自分の紹介コード表示
  - 紹介人数の表示
  - 紹介による獲得ポイント合計
  - 紹介履歴の確認（日時、ステータス）

#### 3.4.5 不正防止
- 同一IPからの大量登録を検知
- 同一デバイスからの登録を検知（Cookie/LocalStorage）
- 疑わしい紹介の手動審査
- 悪質なユーザーのアカウント停止

---

### 3.5 通知機能

#### 3.5.1 LINE連携（LineLinkButton.tsx - 実装済み）
**連携フロー**:
1. ユーザーが「LINE連携」ボタンをクリック
2. LINE OAuth認証画面へリダイレクト
3. ユーザーが認証を承認
4. GAS（Google Apps Script）のコールバックURLで処理
5. LINE User IDとアプリUser IDを紐付け
6. LINE公式アカウントを友だち追加（推奨）

**通知タイミング**:
- 新規アンケート追加時
- ポイント付与時（アンケート回答、友達紹介成功）
- ポイント交換完了時
- キャンペーン告知
- 重要なお知らせ

**通知内容**:
- タイトル
- 本文（簡潔に）
- アクションリンク（アプリへの遷移）

#### 3.5.2 ブラウザプッシュ通知 🆕
**対応ブラウザ**:
- Chrome（デスクトップ/Android）
- Firefox（デスクトップ/Android）
- Edge（デスクトップ）
- Safari（macOS 16.4+、iOS 16.4+）

**実装方式**:
- Web Push API
- Service Worker
- VAPID（Voluntary Application Server Identification）

**許可リクエスト**:
- 初回ログイン後に許可ダイアログ表示
- ユーザーが「許可」を選択した場合のみ有効化
- 設定画面でON/OFF切替可能

**通知タイミング**（LINE連携と同じ）:
- 新規アンケート追加時
- ポイント付与時
- ポイント交換完了時
- キャンペーン告知

**通知内容**:
```javascript
{
  title: "新しいアンケートが追加されました！",
  body: "「就活に関するアンケート」に回答して30ptゲット",
  icon: "/icon-192x192.png",
  badge: "/badge-72x72.png",
  data: { url: "/surveys/123" },
  actions: [
    { action: "view", title: "回答する" },
    { action: "close", title: "閉じる" }
  ]
}
```

**クリック時の動作**:
- アプリの該当ページを開く
- すでにタブが開いている場合はフォーカス

#### 3.5.3 メール通知（バックエンド側で実装）
**送信サービス**: SendGrid / AWS SES / Resend

**通知タイミング**:
- 会員登録時（メール認証）
- パスワードリセット
- ポイント交換完了
- 重要なお知らせ
- LINE/プッシュ通知が無効なユーザー向けフォールバック

#### 3.5.4 通知設定
- 設定画面でカテゴリ別にON/OFF
  - 新規アンケート通知
  - ポイント関連通知
  - キャンペーン通知
  - お知らせ通知
- 通知方法の優先順位設定
  - LINE > ブラウザプッシュ > メール

---

### 3.6 FAQ機能 🆕

#### 3.6.1 FAQ管理（Admin側）
**FAQ作成**:
- カテゴリ選択
  - アカウント・登録
  - アンケート
  - ポイント
  - 友達紹介
  - その他
- 質問文の入力
- 回答文の入力（Markdown対応）
- 表示順序の設定
- 公開/非公開の切替

**FAQ編集・削除**:
- 既存FAQの編集
- 削除（論理削除）
- 並び替え（ドラッグ&ドロップ）

#### 3.6.2 FAQ表示（User側）
**表示画面**:
- ヘッダーの「ヘルプ」または「よくある質問」リンク
- 専用のFAQページ

**機能**:
- カテゴリ別表示
  - タブまたはサイドバーで切り替え
- キーワード検索
  - 質問文・回答文を全文検索
  - リアルタイム検索（入力中に絞り込み）
- アコーディオン形式
  - 質問をクリックで回答を展開
  - 複数同時展開可能

**UI例**:
```typescript
interface FAQ {
  id: string;
  category: 'account' | 'survey' | 'points' | 'referral' | 'other';
  question: string;
  answer: string; // Markdown
  display_order: number;
  is_published: boolean;
  created_at: string;
  updated_at: string;
}
```

**初期FAQリスト（例）**:
1. **アカウント・登録**（10件）
   - 会員登録の方法は？
   - ログインできません
   - パスワードを忘れました
   - メールアドレスを変更したい
   - 退会方法は？
   
2. **アンケート**（15件）
   - アンケートの回答方法は？
   - 回答を修正できますか？
   - アンケートが表示されません
   - 回答期限を過ぎたらどうなりますか？
   
3. **ポイント**（15件）
   - ポイントの貯め方は？
   - ポイントが付与されません
   - ポイント交換の方法は？
   - 最低交換ポイント数は？
   - ポイントに有効期限はありますか？
   
4. **友達紹介**（5件）
   - 紹介コードの発行方法は？
   - 紹介特典はいつもらえますか？
   - 紹介が反映されません
   
5. **その他**（5件）
   - お問い合わせ方法は？
   - プライバシーポリシーについて
   - 利用規約について

#### 3.6.3 お問い合わせフォーム
FAQ画面の下部に設置:
- 「解決しない場合はこちら」ボタン
- お問い合わせフォームへ遷移
  - 名前
  - メールアドレス
  - カテゴリ選択
  - 件名
  - 詳細（テキストエリア）
  - スクリーンショット添付（オプション）

---

### 3.7 お知らせ機能 🆕

#### 3.7.1 お知らせ管理（Admin側）
**お知らせ作成**:
- タイトル
- 本文（Markdown対応、リッチテキストエディタ推奨）
- お知らせタイプ
  - 通常のお知らせ
  - メンテナンス情報
  - キャンペーン告知
  - 重要なお知らせ（強調表示）
- 公開期間設定
  - 公開開始日時
  - 公開終了日時（任意）
- 対象ユーザー
  - 全ユーザー
  - Monitor のみ
  - Client のみ
- プッシュ通知送信の有無
- 優先度（高/中/低）

**お知らせ編集・削除**:
- 下書き保存
- 予約公開
- 公開中の編集
- 削除（論理削除）

#### 3.7.2 お知らせ表示（User側）
**表示場所**:
1. **ダッシュボード上部のバナー**
   - 最新の重要なお知らせを1-2件表示
   - 「×」ボタンで非表示（Cookie/LocalStorageで記録）
   - 未読のお知らせがある場合はバッジ表示

2. **お知らせ一覧ページ**
   - ヘッダーの「お知らせ」アイコンをクリック
   - 時系列順に表示（新しい順）
   - カテゴリ別フィルタ
   - 未読/既読の表示

**お知らせ詳細**:
- タイトル
- 公開日時
- 本文（Markdown レンダリング）
- 既読マーク（自動）

**既読管理**:
```sql
CREATE TABLE announcement_reads (
  user_id UUID REFERENCES users(id),
  announcement_id UUID REFERENCES announcements(id),
  read_at TIMESTAMP DEFAULT NOW(),
  PRIMARY KEY (user_id, announcement_id)
);
```

#### 3.7.3 お知らせの種類（例）
1. **新機能のリリース**
   - 「友達紹介機能がリリースされました！」
   - 「AIマッチング機能が追加されました」

2. **メンテナンス情報**
   - 「定期メンテナンスのお知らせ（3/1 3:00-5:00）」
   - 「緊急メンテナンス完了のお知らせ」

3. **キャンペーン告知**
   - 「春の友達紹介キャンペーン（2倍ポイント）」
   - 「アンケート回答数1万回突破記念キャンペーン」

4. **重要なお知らせ**
   - 「利用規約の改定について」
   - 「ポイント交換方法の変更について」

---

### 3.8 利用規約・プライバシーポリシー機能 🆕

#### 3.8.1 利用規約
**内容**:
- 第1条：適用
- 第2条：利用登録
- 第3条：禁止事項
- 第4条：ポイントの取り扱い
- 第5条：免責事項
- 第6条：規約の変更
- 第7条：準拠法・裁判管轄

**管理方法**:
```sql
CREATE TABLE legal_documents (
  id UUID PRIMARY KEY,
  type VARCHAR(50), -- 'terms' | 'privacy'
  version VARCHAR(20), -- 'v1.0', 'v1.1'
  content TEXT, -- Markdown
  effective_date DATE,
  is_current BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

**バージョン管理**:
- 改定時は新しいバージョンを追加
- 過去のバージョンも閲覧可能
- 「最終更新日」を表示

**同意管理**:
```sql
CREATE TABLE user_consents (
  user_id UUID REFERENCES users(id),
  document_id UUID REFERENCES legal_documents(id),
  consented_at TIMESTAMP DEFAULT NOW(),
  ip_address VARCHAR(45),
  PRIMARY KEY (user_id, document_id)
);
```

**表示方法**:
1. **会員登録時**:
   - チェックボックスで同意を取得
   - 「利用規約」「プライバシーポリシー」へのリンク
   - モーダルまたは別ページで全文表示

2. **フッターリンク**:
   - 全ページのフッターに「利用規約」「プライバシーポリシー」リンク
   - 専用ページで全文表示

3. **改定時**:
   - ログイン時にモーダルで変更点を表示
   - 再同意を取得（重要な変更の場合）

#### 3.8.2 プライバシーポリシー
**内容**:
1. 個人情報の収集項目
2. 個人情報の利用目的
3. 個人情報の第三者提供
4. Cookie・アクセス解析ツール
5. 個人情報の開示・訂正・削除
6. お問い合わせ窓口

**特記事項**:
- 個人情報保護法に準拠
- GDPRへの対応（将来的）
- データエクスポート機能（GDPR Article 20）

---

### 3.9 企業機能（ClientDashboard.tsx）

#### 3.9.1 企業アカウント
- 企業専用のログイン機能
- 企業情報の管理
  - 企業名
  - 担当者名
  - メールアドレス
  - 電話番号
  - 業界
  - 企業規模

#### 3.9.2 アンケート作成・管理
- アンケートの作成（手動/Markdown/CSV）
- アンケートの編集
- アンケートの公開・非公開設定
- ターゲット設定
- ポイント報酬の設定

#### 3.9.3 回答データ管理
**閲覧機能**:
- 自社のアンケート回答一覧
- 回答詳細の閲覧
- 集計データの表示
  - 回答数
  - 回答率
  - 選択肢別集計
  - グラフ表示（円グラフ、棒グラフ）

**エクスポート機能**:
- CSV形式でのダウンロード
- Excel形式でのダウンロード
- データ項目の選択
- 期間指定でのフィルタリング

**データプライバシー**:
- 個人を特定できる情報（氏名、メールアドレス）は非表示
- 統計データとして提供
- 属性情報（年齢層、性別、職業など）は匿名化して提供

---

### 3.10 サポート機能（SupportDashboard.tsx）

#### 3.10.1 サポートチャット（ChatModal.tsx）
**機能**:
- モニターとサポート担当者の1対1チャット
- リアルタイム通信（Supabase Realtime）
- メッセージの既読管理（実装可能）
- ファイル添付（画像のみ、将来的）

**サポート担当者画面**:
- チャット中のモニター一覧
- 未対応チャットの通知
- チャット履歴の検索
- よくある質問への定型文返信

#### 3.10.2 お問い合わせ管理
- お問い合わせフォームからの受付
- ステータス管理（未対応/対応中/完了）
- 担当者アサイン
- 返信機能

---

### 3.11 管理者機能（AdminDashboard.tsx）

#### 3.11.1 ユーザー管理
- ユーザー一覧表示
- ユーザー詳細情報閲覧
- ユーザー検索・フィルタリング
- ユーザーの強制退会
- ユーザーのアカウント停止・復活
- 役割の変更（Monitor/Client/Admin/Support）

#### 3.11.2 アンケート管理
- 全アンケートの一覧・管理
- アンケートの承認・却下（Client作成分）
- アンケートの強制終了
- アンケート統計の閲覧

#### 3.11.3 ポイント管理（PointExchangeManager.tsx）
- ポイント交換申請の承認・却下
- 手動でのポイント付与・減算（特別対応）
- 不正利用の監視・対応
- ポイント発行・交換状況の確認

#### 3.11.4 企業管理
- 企業アカウントの作成
- 企業情報の編集
- 企業アカウントの停止・削除
- 企業一覧の表示

#### 3.11.5 FAQ管理
- FAQ の作成・編集・削除
- カテゴリ管理
- 表示順序の変更
- 公開/非公開の切替

#### 3.11.6 お知らせ管理
- お知らせの作成・編集・削除
- 公開期間の設定
- 対象ユーザーの設定
- プッシュ通知の送信

#### 3.11.7 統計・分析
- ユーザー登録数推移
- アクティブユーザー数
- アンケート回答率
- ポイント発行・交換状況
- 友達紹介状況
- ダッシュボード表示

#### 3.11.8 システム設定
- 利用規約・プライバシーポリシーの管理
- メール テンプレート管理
- システムパラメータ設定
  - 最低交換ポイント数
  - 基本アンケート報酬ポイント数
  - 友達紹介報酬ポイント数

---

### 3.12 AIマッチング機能（MatchingFeature.tsx - 実装済み）

#### 3.12.1 機能概要
プロフィールアンケートの回答を基に、AIが各モニターに適した企業を推薦する。

**AI活用フロー**:
1. **Gemini**: プロフィールアンケートの回答から価値観を抽出
2. **Claude**: 企業データと価値観のマッチング、スコアリング
3. **GPT-4**: パーソナライズされた推薦文の生成

#### 3.12.2 評価軸
- **成長可能性**: キャリアパス、教育制度
- **文化フィット**: 企業文化との適合度
- **働きやすさ**: ワークライフバランス、福利厚生

#### 3.12.3 企業データ
```sql
CREATE TABLE companies (
  id UUID PRIMARY KEY,
  company_name VARCHAR(255),
  industry VARCHAR(100),
  culture_description TEXT,
  recommended_points TEXT[], -- 強み
  location_info TEXT,
  training_support TEXT,
  long_holidays TEXT,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

---

### 3.13 キャリア相談機能（CareerConsultationModal.tsx - 実装済み）

#### 3.13.1 提供サービス
1. **キャリアプランニング**（60分、無料）
2. **履歴書・ES添削**（45分、無料）
3. **面接対策**（60分、無料）
4. **業界研究サポート**（45分、無料）

#### 3.13.2 予約フロー
1. サービス選択
2. 希望日時の入力
3. 相談内容の入力
4. 予約確定
5. 担当カウンセラーから連絡

#### 3.13.3 実施方法
- オンライン（Zoom推奨）
- 対面（オプション、地域限定）

---

### 3.14 PWA機能（InstallPWAButton.tsx - 実装済み）

#### 3.14.1 PWA対応
- マニフェストファイル（manifest.json）
- Service Worker
- オフライン対応（キャッシュ戦略）
- アプリアイコン（複数サイズ）

#### 3.14.2 インストールプロンプト
- 初回訪問時またはWelcomeScreenで表示
- 「ホーム画面に追加」ボタン
- A2HS（Add to Home Screen）イベントの活用

---

## 4. 非機能要件

### 4.1 パフォーマンス要件
- **ページ読み込み時間**: 3秒以内（First Contentful Paint）
- **APIレスポンス時間**: 1秒以内
- **同時接続数**: 150人に対応（初期）、1,000人まで拡張可能
- **データベースレスポンス**: 500ms以内

### 4.2 セキュリティ要件
- **通信**: HTTPS通信の必須化
- **認証**: Supabase Auth（JWT）
- **パスワード**: bcryptによるハッシュ化
- **Row Level Security**: Supabaseの RLSポリシーを適用
- **SQLインジェクション**: Supabaseの自動防御
- **XSS対策**: React の自動エスケープ + Content Security Policy
- **CSRF対策**: SameSite Cookie属性
- **個人情報**: 暗号化保存（必要に応じて）
- **バックアップ**: 日次自動バックアップ

### 4.3 可用性要件
- **稼働率**: 99.9%以上（月間ダウンタイム43分以内）
- **定期メンテナンス**: 月1回程度（深夜時間帯）
- **障害復旧**: 1時間以内（レベル1）

### 4.4 拡張性要件
- ユーザー数の増加に対応可能な設計
- Supabaseのスケーリング機能を活用
- 機能追加が容易なモジュール設計
- APIの拡張性を考慮

### 4.5 互換性要件
**対応ブラウザ**:
- Google Chrome（最新版および1つ前のバージョン）
- Safari（最新版および1つ前のバージョン）
- Microsoft Edge（最新版および1つ前のバージョン）
- Firefox（最新版および1つ前のバージョン）

**対応デバイス**:
- PC（Windows、Mac）
- タブレット（iPad、Android）
- スマートフォン（iPhone、Android）

**PWA対応**:
- Android: Chrome, Edge
- iOS/iPadOS: Safari（iOS 16.4+）
- Desktop: Chrome, Edge

### 4.6 保守性要件
- コードの可読性・保守性を重視
- TypeScriptによる型安全性
- コンポーネントの適切な分割
- 適切なコメント・ドキュメント
- バージョン管理（Git）
- テストコードの実装（カバレッジ80%以上推奨）

### 4.7 アクセシビリティ要件
- WCAG 2.1 レベルAA準拠を目指す
- キーボード操作対応
- スクリーンリーダー対応
- 適切なコントラスト比

---

## 5. データ要件

### 5.1 主要データモデル

#### 5.1.1 ユーザー（users）
```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  email VARCHAR(255) UNIQUE NOT NULL,
  name VARCHAR(255) NOT NULL,
  role VARCHAR(20) NOT NULL, -- 'monitor' | 'client' | 'admin' | 'support'
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.2 モニタープロフィール（monitor_profiles）
```sql
CREATE TABLE monitor_profiles (
  user_id UUID PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,
  age INTEGER,
  gender VARCHAR(20),
  occupation VARCHAR(100), -- 自由入力
  location VARCHAR(100), -- 都道府県（自由入力またはプルダウン）
  points INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.3 プロフィールアンケート（monitor_profile_survey）
```sql
CREATE TABLE monitor_profile_survey (
  user_id UUID PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,
  -- 就活状況
  job_hunting_status VARCHAR(50),
  job_hunting_areas TEXT[], -- 複数選択
  interested_industries TEXT[],
  -- 価値観
  important_points TEXT[],
  lively_work_state TEXT,
  job_satisfaction_moments TEXT,
  -- その他50問以上のフィールド（実装に応じて追加）
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.4 アンケート（surveys）
```sql
CREATE TABLE surveys (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  client_id UUID REFERENCES users(id),
  title VARCHAR(255) NOT NULL,
  description TEXT,
  survey_type VARCHAR(50), -- 'daily' | 'normal' | 'campaign' | 'profile'
  points_reward INTEGER DEFAULT 30,
  status VARCHAR(20) DEFAULT 'draft', -- 'draft' | 'published' | 'closed'
  publish_start_at TIMESTAMP,
  publish_end_at TIMESTAMP,
  target_conditions JSONB, -- ターゲット条件（プロフィールアンケートのフィールドに基づく）
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.5 質問（questions）
```sql
CREATE TABLE questions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  survey_id UUID REFERENCES surveys(id) ON DELETE CASCADE,
  question_text TEXT NOT NULL,
  question_type VARCHAR(50) NOT NULL, -- 'single' | 'multiple' | 'text' | 'rating' | 'ranking'
  options TEXT[], -- 選択肢（JSON配列）
  required BOOLEAN DEFAULT TRUE,
  order_index INTEGER,
  is_multiple_select BOOLEAN DEFAULT FALSE,
  max_selections INTEGER, -- ランキングの場合の最大選択数
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.6 アンケート回答（survey_responses）
```sql
CREATE TABLE survey_responses (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  survey_id UUID REFERENCES surveys(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  response_data JSONB NOT NULL, -- 質問IDをキーとした回答データ
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(survey_id, user_id) -- 重複回答防止
);
```

#### 5.1.7 ポイント履歴（point_history）
```sql
CREATE TABLE point_history (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  points INTEGER NOT NULL, -- 増減（+30, -500など）
  type VARCHAR(20) NOT NULL, -- 'earned' | 'exchange'
  reason TEXT, -- 'アンケート回答', '友達紹介', 'ポイント交換'など
  related_id UUID, -- 関連するアンケートID、紹介IDなど
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.8 ポイント交換申請（point_exchange_requests）
```sql
CREATE TABLE point_exchange_requests (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  points_amount INTEGER NOT NULL,
  exchange_type VARCHAR(50), -- 'pex' | 'dot_money' など
  contact_type VARCHAR(50), -- 'line_push' | 'email'
  exchange_contact VARCHAR(255), -- メールアドレスまたはLINE User ID
  reward_detail TEXT, -- ギフト券URL/コード（管理者が入力）
  status VARCHAR(20) DEFAULT 'pending', -- 'pending' | 'completed' | 'rejected'
  notes TEXT,
  processed_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.9 紹介コード（referral_codes） 🆕
```sql
CREATE TABLE referral_codes (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  code VARCHAR(20) UNIQUE NOT NULL, -- 'KOECAN-XXXXXXXX'
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.10 紹介履歴（referral_history） 🆕
```sql
CREATE TABLE referral_history (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  referral_code_id UUID REFERENCES referral_codes(id) ON DELETE CASCADE,
  referrer_user_id UUID REFERENCES users(id), -- 紹介者
  referred_user_id UUID REFERENCES users(id), -- 被紹介者
  points_awarded BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(referral_code_id, referred_user_id) -- 重複紹介防止
);
```

#### 5.1.11 FAQ（faqs） 🆕
```sql
CREATE TABLE faqs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  category VARCHAR(100) NOT NULL, -- 'account' | 'survey' | 'points' | 'referral' | 'other'
  question TEXT NOT NULL,
  answer TEXT NOT NULL, -- Markdown
  display_order INTEGER DEFAULT 0,
  is_published BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.12 お知らせ（announcements） 🆕
```sql
CREATE TABLE announcements (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  title VARCHAR(255) NOT NULL,
  content TEXT NOT NULL, -- Markdown
  announcement_type VARCHAR(50), -- 'news' | 'maintenance' | 'campaign' | 'important'
  priority INTEGER DEFAULT 0, -- 高いほど優先
  publish_start_at TIMESTAMP,
  publish_end_at TIMESTAMP,
  target_roles TEXT[], -- ['monitor', 'client'] など、NULLの場合は全員
  send_push_notification BOOLEAN DEFAULT FALSE,
  is_published BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.13 お知らせ既読管理（announcement_reads） 🆕
```sql
CREATE TABLE announcement_reads (
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  announcement_id UUID REFERENCES announcements(id) ON DELETE CASCADE,
  read_at TIMESTAMP DEFAULT NOW(),
  PRIMARY KEY (user_id, announcement_id)
);
```

#### 5.1.14 利用規約・プライバシーポリシー（legal_documents） 🆕
```sql
CREATE TABLE legal_documents (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  type VARCHAR(50) NOT NULL, -- 'terms' | 'privacy'
  version VARCHAR(20) NOT NULL, -- 'v1.0', 'v1.1'
  content TEXT NOT NULL, -- Markdown
  effective_date DATE NOT NULL,
  is_current BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.15 同意履歴（user_consents） 🆕
```sql
CREATE TABLE user_consents (
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  document_id UUID REFERENCES legal_documents(id),
  consented_at TIMESTAMP DEFAULT NOW(),
  ip_address VARCHAR(45),
  PRIMARY KEY (user_id, document_id)
);
```

#### 5.1.16 プッシュ通知購読（push_subscriptions） 🆕
```sql
CREATE TABLE push_subscriptions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  endpoint TEXT NOT NULL UNIQUE,
  p256dh TEXT NOT NULL,
  auth TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.17 LINE連携（line_connections）
```sql
CREATE TABLE line_connections (
  user_id UUID PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,
  line_user_id VARCHAR(255) UNIQUE NOT NULL,
  line_display_name VARCHAR(255),
  connected_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.18 チャットルーム（chat_rooms）
```sql
CREATE TABLE chat_rooms (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  participants UUID[] NOT NULL, -- [monitor_id, support_id]
  room_type VARCHAR(20) DEFAULT 'support', -- 'support' | 'group'
  created_by UUID REFERENCES users(id),
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.19 チャットメッセージ（chat_messages）
```sql
CREATE TABLE chat_messages (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  room_id UUID REFERENCES chat_rooms(id) ON DELETE CASCADE,
  sender_id UUID REFERENCES users(id),
  message TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.20 企業（companies）
```sql
CREATE TABLE companies (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  company_name VARCHAR(255) NOT NULL,
  industry VARCHAR(100),
  culture_description TEXT,
  recommended_points TEXT[], -- 強み
  location_info TEXT,
  training_support TEXT,
  long_holidays TEXT,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

### 5.2 データ保持期間
- **ユーザーデータ**: 退会後1年間保持（その後削除または匿名化）
- **アンケート回答データ**: 無期限保持（統計データとして活用）
- **ポイント履歴**: 無期限保持
- **チャットメッセージ**: 3ヶ月間保持（その後削除、重要な場合はアーカイブ）
- **お知らせ**: 公開終了後1年間保持
- **FAQ**: 無期限保持

---

## 6. 画面構成

### 6.1 ユーザー側画面

#### 6.1.1 認証画面
- **WelcomeScreen.tsx**: 初回表示画面、サービス説明
- **AuthForm.tsx**: ログイン・新規登録画面
- パスワードリセット画面（実装予定）
- メール認証画面（実装予定）

#### 6.1.2 メイン画面（Monitor）
- **MonitorDashboard.tsx**: ダッシュボード（ホーム）
  - 保有ポイント表示
  - 新着アンケート一覧
  - お知らせバナー 🆕
  - クイックアクション（友達紹介、FAQ、AIマッチングなど）
- アンケート一覧画面
  - 未回答アンケート
  - 回答済みアンケート
  - フィルタ・ソート機能
- アンケート詳細・回答画面
- **ProfileModal.tsx**: マイページ
  - プロフィール表示・編集
  - ポイント履歴
  - 友達紹介コード管理 🆕
  - 通知設定 🆕
- **MonitorProfileSurveyModal.tsx**: プロフィールアンケート
- **PointExchangeModal.tsx**: ポイント交換画面
- **MatchingFeature.tsx**: AIマッチング画面
- **CareerConsultationModal.tsx**: キャリア相談予約画面
- **ChatModal.tsx**: サポートチャット画面
- **FAQModal.tsx**: FAQ画面 🆕
- **AnnouncementList.tsx**: お知らせ一覧 🆕
- **TermsOfService.tsx**: 利用規約 🆕
- **PrivacyPolicy.tsx**: プライバシーポリシー 🆕

#### 6.1.3 共通部品
- **ヘッダー**（ナビゲーション）
  - お知らせアイコン（未読バッジ） 🆕
  - ユーザーメニュー
- **フッター**
  - 利用規約・プライバシーポリシーリンク 🆕
  - FAQ・お問い合わせリンク
- **サイドメニュー**（スマホ）
- **通知バッジ**
- **AnimatedBackground.tsx**: アニメーション背景
- **InstallPWAButton.tsx**: PWAインストールボタン
- **LineLinkButton.tsx**: LINE連携ボタン

### 6.2 企業側画面（Client）

#### 6.2.1 認証画面
- 企業ログイン画面（AuthForm.tsx共通）

#### 6.2.2 メイン画面
- **ClientDashboard.tsx**: 企業ダッシュボード
  - アンケート作成ボタン
  - アンケート一覧
  - 回答データサマリー
- **ImportSurveyModal.tsx**: Markdownインポート
- **ImportCsvModal.tsx**: CSVインポート
- アンケート作成・編集画面
- 回答データ閲覧画面
- 回答データダウンロード画面
- 企業情報編集画面

### 6.3 サポート側画面（Support）

#### 6.3.1 メイン画面
- **SupportDashboard.tsx**: サポートダッシュボード
  - モニター一覧
  - チャット開始ボタン
  - キャリア相談管理（仮）
- **ChatModal.tsx**: チャット画面（Support視点）
- **LineLinkButton.tsx**: LINE連携（モーダル経由）

### 6.4 管理者画面（Admin）

#### 6.4.1 認証画面
- 管理者ログイン画面（AuthForm.tsx共通）

#### 6.4.2 メイン画面
- **AdminDashboard.tsx**: 管理者ダッシュボード
  - 統計データ
  - クイックアクション
- ユーザー管理画面
- アンケート管理画面
  - アンケート一覧
  - アンケート作成・編集
  - アンケート公開管理
- **PointExchangeManager.tsx**: ポイント交換管理
- 企業管理画面
- **AdminJobInfoManager.tsx**: 求人情報管理（企業マッチング関連）
- **AdminSupportChatViewer.tsx**: チャット閲覧画面
- **FAQManagement.tsx**: FAQ管理画面 🆕
- **AnnouncementManagement.tsx**: お知らせ管理画面 🆕
- **LegalDocumentManagement.tsx**: 利用規約・プライバシーポリシー管理 🆕
- **PushNotificationSender.tsx**: プッシュ通知送信画面 🆕
- 設定画面

---

## 7. 外部連携

### 7.1 ポイント交換API 🆕（自動連携）
**連携先**: PeX、ドットマネー、Gポイント等（優先順位で選定）

**主要エンドポイント**:
```
POST /api/v1/exchange/request    # ポイント交換申請
GET  /api/v1/exchange/status     # 交換状況確認
GET  /api/v1/exchange/history    # 交換履歴取得
```

**認証方式**: APIキー + 署名（HMAC-SHA256）

**フロー**:
1. ユーザーがポイント交換申請（500pt以上）
2. システムが外部APIに自動連携
3. 交換URLを取得
4. LINE/メールで自動通知
5. ポイント履歴に記録

**エラーハンドリング**:
- APIエラー時は管理者に通知
- リトライ機能（最大3回）
- フォールバック: 手動承認に切り替え

### 7.2 メール送信サービス
**連携先**: SendGrid / AWS SES / Resend

**主要機能**:
- トランザクションメール（会員登録、パスワードリセット）
- 通知メール（ポイント交換完了、キャンペーン等）
- 一斉配信（お知らせ、重要通知）

**テンプレート管理**:
- 会員登録確認メール
- パスワードリセットメール
- ポイント交換完了メール
- 新規アンケート通知メール
- 友達紹介成功通知メール 🆕

### 7.3 LINE Messaging API
**連携先**: LINE公式アカウント

**実装方式**: GAS（Google Apps Script）経由

**フロー**:
1. ユーザーがLINE連携ボタンをクリック
2. LINE OAuth認証画面へリダイレクト
3. 認証成功後、GASのコールバックURLへ
4. GASでLINE User IDとアプリUser IDを紐付け
5. Supabaseの`line_connections`テーブルに保存

**プッシュ通知**:
```javascript
// GAS側の実装例
function sendLineMessage(lineUserId, message) {
  const url = 'https://api.line.me/v2/bot/message/push';
  const payload = {
    to: lineUserId,
    messages: [{ type: 'text', text: message }]
  };
  
  UrlFetchApp.fetch(url, {
    method: 'post',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer ' + LINE_CHANNEL_ACCESS_TOKEN
    },
    payload: JSON.stringify(payload)
  });
}
```

### 7.4 プッシュ通知サービス 🆕
**実装方式**: Web Push API + FCM（Firebase Cloud Messaging）

**VAPID（Voluntary Application Server Identification）**:
- 公開鍵・秘密鍵の生成
- サブスクリプション購読

**送信フロー**:
1. ユーザーがブラウザプッシュ通知を許可
2. サブスクリプション情報をDBに保存
3. イベント発生時（新規アンケート等）
4. 全購読者にプッシュ通知を送信

### 7.5 アクセス解析
**連携先**: Google Analytics 4

**トラッキングイベント**:
- ページビュー
- アンケート回答完了
- ポイント交換申請
- 友達紹介成功 🆕
- PWAインストール

### 7.6 エラー監視
**連携先**: Sentry

**監視対象**:
- JavaScriptエラー
- APIエラー
- パフォーマンス問題

---

## 8. 開発スケジュール（v2.0機能追加）

### フェーズ1: v2.0機能開発（4週間）

**Week 1: 友達紹介機能**
- データベーステーブル作成
- 紹介コード発行機能
- 紹介コード入力機能
- ポイント付与ロジック
- 紹介実績表示
- テスト

**Week 2: FAQ・お知らせ機能**
- FAQ管理画面（Admin）
- FAQ表示画面（User）
- お知らせ管理画面（Admin）
- お知らせ表示機能（バナー、一覧）
- 既読管理
- テスト

**Week 3: 利用規約・プッシュ通知**
- 利用規約・プライバシーポリシー管理
- 同意取得フロー
- ブラウザプッシュ通知実装
  - Service Worker
  - 購読管理
  - 通知送信ロジック
- テスト

**Week 4: 外部API連携・統合テスト**
- ポイント交換API自動連携
- メール送信自動化
- LINE連携の強化
- 統合テスト
- バグ修正

### フェーズ2: テスト・リリース（2週間）

**Week 5: 総合テスト**
- 機能テスト
- セキュリティテスト
- パフォーマンステスト
- ユーザビリティテスト

**Week 6: リリース準備・本番リリース**
- 本番環境構築
- データ移行
- ドキュメント整備
- ソフトローンチ
- フィードバック収集
- 本格リリース

**合計開発期間: 約6週間（約1.5ヶ月）**

---

## 9. リスク管理

### 9.1 技術的リスク
| リスク | 対策 |
|--------|------|
| 外部API障害によるポイント交換停止 | フォールバック（手動承認）、リトライ機能 |
| 同時接続数増加によるパフォーマンス低下 | Supabaseのスケーリング、CDN活用 |
| ブラウザプッシュ通知の非対応ブラウザ | LINEやメールでフォールバック |

### 9.2 セキュリティリスク
| リスク | 対策 |
|--------|------|
| 個人情報漏洩 | 暗号化、RLSポリシー、定期的な脆弱性診断 |
| 不正アクセス | 2FA（将来的）、IPブロック、異常検知 |
| 友達紹介の不正利用 | 同一IP/デバイス検知、手動審査 |

### 9.3 運用リスク
| リスク | 対策 |
|--------|------|
| スパムユーザーの大量登録 | CAPTCHA、メール認証、レート制限 |
| アンケート回答の品質低下 | 回答時間チェック、矛盾回答の検出 |

### 9.4 ビジネスリスク
| リスク | 対策 |
|--------|------|
| ユーザー獲得が進まない | 友達紹介キャンペーン強化、マーケティング施策 |
| ポイント原資の枯渇 | 企業からの掲載料確保、ポイント報酬の最適化 |

---

## 10. 今後の拡張可能性

### 10.1 短期的な拡張（3-6ヶ月）
- ログインボーナス機能
- ランキング機能
- アプリ内ポイントモール

### 10.2 中期的な拡張（6-12ヶ月）
- ネイティブアプリ化（iOS/Android）
- 有料キャリア相談サービス
- 企業からの直接スカウト機能
- ゲーミフィケーション要素

### 10.3 長期的な拡張（1年以上）
- 他大学・他セグメントへの展開
- グローバル展開
- AI チャットボットサポート
- ブロックチェーンポイント

---

## 11. 成功指標（KPI）

### 11.1 ユーザー関連
- 月間アクティブユーザー数（MAU）: 300人以上
- 新規登録ユーザー数: 50人/月以上
- ユーザー継続率（リテンション）: 60%以上
- 平均アンケート回答数/ユーザー: 5回/月以上

### 11.2 アンケート関連
- アンケート回答率: 60%以上
- アンケート完答率: 80%以上
- 平均回答時間: 5-10分

### 11.3 ポイント関連
- ポイント発行数: 月間10,000pt以上
- ポイント交換率: 60%以上
- 平均保有ポイント数: 300pt

### 11.4 友達紹介関連 🆕
- 紹介経由の新規登録数: 20人/月以上
- 紹介成功率: 30%以上（紹介コード発行数に対して）
- 平均紹介人数/アクティブユーザー: 0.5人以上

### 11.5 エンゲージメント 🆕
- LINE連携率: 40%以上
- ブラウザプッシュ通知許可率: 30%以上
- PWAインストール率: 20%以上
- FAQ閲覧率: 50%以上
- AIマッチング利用率: 30%以上

### 11.6 ビジネス関連
- 企業アカウント数: 10社以上
- アンケート掲載数: 月間50件以上
- 収益（広告出稿料）: 月間50万円以上

---

## 12. 付録

### 12.1 用語集
- **声キャンポイント**: アプリ内で使用できるポイント（1pt = 1円相当）
- **デイリーアンケート**: 毎日回答可能なアンケート
- **ターゲット配信**: プロフィールに基づく絞り込み配信
- **AIマッチング**: Gemini/Claude/GPT-4による企業推薦
- **PWA**: Progressive Web App（アプリライクなWebアプリ）
- **RLS**: Row Level Security（Supabaseのセキュリティ機能）

### 12.2 参考資料
- ユーザーストーリー
- ワイヤーフレーム
- データベース設計書
- API仕様書
- Supabase設定ガイド

---

**文書作成日**: 2025年11月22日  
**バージョン**: 2.0  
**作成者**: Claude  
**承認者**: （承認予定）  
**次回レビュー予定**: v2.0機能リリース後