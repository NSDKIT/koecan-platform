# クイズインポート形式ガイド

クイズ（正解付きアンケート）をインポートする際の形式について説明します。

## 📋 目次
1. [Markdown形式](#markdown形式)
2. [CSV形式](#csv形式)
3. [形式の比較](#形式の比較)

---

## Markdown形式

### 基本構造

```markdown
# アンケートタイトル

説明文（オプション）

## 質問1: 単一選択問題
- [x] 正解の選択肢
- [ ] 不正解の選択肢
- [ ] 不正解の選択肢

## 質問2: 複数選択問題
- [x] 正解1
- [ ] 不正解
- [x] 正解2
- [ ] 不正解

## 質問3: テキスト問題
正解: 正解のテキスト

## 質問4: 数値問題
正解: 42

## 質問5: 通常のアンケート（正解なし）
- 選択肢1
- 選択肢2
```

### 形式の詳細

#### 1. アンケートタイトル
- `# ` で始まる行がアンケートタイトル
- 例: `# 基礎知識クイズ`

#### 2. 説明文（オプション）
- タイトルと最初の質問の間のテキストが説明文
- 空行で区切ることができます

#### 3. 質問
- `## ` で始まる行が質問文
- 質問文は `## ` の後に続けて記述可能

#### 4. 選択肢形式（単一選択・複数選択）

**正解マーク:**
- `- [x]` または `- [X]`: 正解の選択肢
- `- [ ]`: 不正解の選択肢

**例（単一選択）:**
```markdown
## 日本の首都は？
- [x] 東京
- [ ] 大阪
- [ ] 京都
- [ ] 名古屋
```

**例（複数選択）:**
```markdown
## 以下のうち、都道府県名を選んでください
- [x] 東京
- [ ] 横浜
- [x] 大阪
- [ ] 川崎
```

**通常のアンケート（正解なし）:**
```markdown
## 好きな色は？
- 赤
- 青
- 緑
- 黄色
```
※ `[ ]` や `[x]` がない場合は通常のアンケートとして扱われます

#### 5. テキスト問題

```markdown
## フルネームを入力してください
正解: 山田太郎
```

または

```markdown
## フルネームを入力してください
答え: 山田太郎
```

**形式:**
- `正解: ` または `答え: ` で始まる行が正解
- その前の `## ` 行が質問文

**通常のアンケート（正解なし）:**
```markdown
## お名前を入力してください
```
※ 正解行がない場合は自由記述のアンケートとして扱われます

#### 6. 数値問題

```markdown
## 2 + 2 は？
正解: 4
```

または

```markdown
## 2 + 2 は？
答え: 4
```

**形式:**
- `正解: ` または `答え: ` の後に数値を記述
- その前の `## ` 行が質問文

**通常のアンケート（正解なし）:**
```markdown
## 年齢を入力してください
```
※ 正解行がない場合は数値入力のアンケートとして扱われます

### 完全な例

```markdown
# 基礎知識クイズ

このクイズは基礎的な知識を確認するためのものです。
全問正解で30ポイント獲得できます。

## 日本の首都はどこですか？
- [x] 東京
- [ ] 大阪
- [ ] 京都
- [ ] 名古屋

## 以下のうち、正しいものを全て選んでください
- [x] 地球は丸い
- [ ] 太陽は地球の周りを回る
- [x] 水は0度で凍る
- [ ] 空気には重さがない

## 1 + 1 はいくつですか？
正解: 2

## あなたの名前を入力してください
正解: サンプル太郎

## 好きな色は？（通常のアンケート）
- 赤
- 青
- 緑
- 黄色
```

---

## CSV形式

### 基本構造

```csv
survey_title,question_text,question_type,is_required,option_1,option_2,option_3,option_4,correct_option_1,correct_option_2,correct_answer_text,correct_answer_number
基礎知識クイズ,日本の首都は？,single_choice,true,東京,大阪,京都,名古屋,1,,,
基礎知識クイズ,1 + 1 はいくつ？,number,true,,,,,,"","",,2
基礎知識クイズ,あなたの名前は？,text,true,,,,,,"","",サンプル太郎,
基礎知識クイズ,好きな色は？（通常のアンケート）,single_choice,true,赤,青,緑,黄色,,,,
```

### カラム説明

| カラム名 | 必須 | 説明 | 例 |
|---------|------|------|-----|
| `survey_title` | ✅ | アンケートタイトル | `基礎知識クイズ` |
| `question_text` | ✅ | 質問文 | `日本の首都は？` |
| `question_type` | ✅ | 質問タイプ | `single_choice`, `multiple_choice`, `text`, `number`, `rating` |
| `is_required` | ✅ | 必須かどうか | `true`, `false` |
| `option_1` ~ `option_4` | - | 選択肢（最大4つ） | `東京`, `大阪` |
| `correct_option_1`, `correct_option_2` | - | 正解の選択肢番号（1-4） | `1`, `3` |
| `correct_answer_text` | - | テキスト回答の正解 | `サンプル太郎` |
| `correct_answer_number` | - | 数値回答の正解 | `2` |

### 形式の詳細

#### 1. 単一選択問題

```csv
survey_title,question_text,question_type,is_required,option_1,option_2,option_3,option_4,correct_option_1
基礎知識クイズ,日本の首都は？,single_choice,true,東京,大阪,京都,名古屋,1
```

- `correct_option_1`: 正解の選択肢番号（1-4）を指定
- 例: `1` = `option_1` が正解

#### 2. 複数選択問題

```csv
survey_title,question_text,question_type,is_required,option_1,option_2,option_3,option_4,correct_option_1,correct_option_2
基礎知識クイズ,正しいものを選ぶ,multiple_choice,true,選択肢1,選択肢2,選択肢3,選択肢4,1,3
```

- `correct_option_1`, `correct_option_2`: 正解の選択肢番号を複数指定
- 例: `1,3` = `option_1` と `option_3` が正解

#### 3. テキスト問題

```csv
survey_title,question_text,question_type,is_required,correct_answer_text
基礎知識クイズ,あなたの名前は？,text,true,サンプル太郎
```

- `correct_answer_text`: 正解のテキストを指定
- 空欄の場合は通常のアンケート

#### 4. 数値問題

```csv
survey_title,question_text,question_type,is_required,correct_answer_number
基礎知識クイズ,1 + 1 はいくつ？,number,true,2
```

- `correct_answer_number`: 正解の数値を指定
- 空欄の場合は通常のアンケート

#### 5. 通常のアンケート（正解なし）

```csv
survey_title,question_text,question_type,is_required,option_1,option_2,option_3
基礎知識クイズ,好きな色は？,single_choice,true,赤,青,緑
```

- 正解関連のカラムを全て空欄にすることで通常のアンケートとして扱われます

### CSVテンプレート例

```csv
survey_title,question_text,question_type,is_required,option_1,option_2,option_3,option_4,correct_option_1,correct_option_2,correct_answer_text,correct_answer_number
基礎知識クイズ,日本の首都は？,single_choice,true,東京,大阪,京都,名古屋,1,,,
基礎知識クイズ,正しいものを全て選ぶ,multiple_choice,true,選択肢1,選択肢2,選択肢3,選択肢4,1,3,,
基礎知識クイズ,1 + 1 はいくつ？,number,true,,,,,,"","",,2
基礎知識クイズ,あなたの名前は？,text,true,,,,,,"","",サンプル太郎,
基礎知識クイズ,好きな色は？（通常のアンケート）,single_choice,true,赤,青,緑,黄色,,,,
```

---

## 形式の比較

| 項目 | Markdown | CSV |
|------|----------|-----|
| **読みやすさ** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| **編集しやすさ** | ⭐⭐⭐⭐⭐ | ⭐⭐ |
| **一括編集** | ⭐⭐ | ⭐⭐⭐⭐⭐ |
| **複雑な問題** | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| **推奨用途** | 少数のクイズ、手動作成 | 大量のクイズ、Excel等から変換 |

### Markdown形式をおすすめする場合
- 少数のクイズを作成する場合
- 手動で作成・編集する場合
- わかりやすく整理したい場合
- 説明文を多く含めたい場合

### CSV形式をおすすめする場合
- 大量のクイズを一度にインポートする場合
- Excel等の表計算ソフトから変換する場合
- 既存データから変換する場合
- プログラムで自動生成する場合

---

## 注意事項

1. **正解の設定**
   - 正解を設定するとクイズとして扱われます（全問正解でないとポイントがもらえません）
   - 正解を設定しない場合は通常のアンケートとして扱われます（回答すればポイントがもらえます）

2. **選択肢の正解マーク**
   - 単一選択問題: 1つの選択肢のみ `[x]` を付ける
   - 複数選択問題: 複数の選択肢に `[x]` を付けられる
   - 通常のアンケート: `[x]` を付けない

3. **テキスト・数値問題の正解**
   - 大文字小文字は区別しません（テキスト問題）
   - 完全一致で判定されます

4. **CSVのエンコーディング**
   - UTF-8形式で保存してください

5. **重複するアンケートタイトル**
   - 同じタイトルで複数のアンケートが作成されます
   - 必要に応じてタイトルを変更してください

---

## 例: クイズとアンケートの混在

1つのMarkdownファイルまたはCSVファイルに、クイズ（正解付き）と通常のアンケート（正解なし）を混在させることができます。

```markdown
# 基礎知識クイズ（全問正解で30pt）

## 日本の首都は？
- [x] 東京
- [ ] 大阪

## あなたの名前を入力してください（クイズ）
正解: サンプル太郎

# アンケート（回答で10pt）

## 好きな色は？
- 赤
- 青
- 緑
```

この場合、最初のアンケートはクイズとして、2番目のアンケートは通常のアンケートとして扱われます。

